# Project Prompt

一个专为开发者设计的AI提示词编写工具，支持智能文件选择和内容管理。

## ✨ 功能特点

- 🎯 **智能文件选择**: 输入 `@` 触发文件自动补全，`@@` 直接导入文件内容
- 📁 **项目管理**: 支持多项目管理，自动扫描项目文件并遵循 .gitignore 规则
- ↕️ **项目排序**: 使用上下箭头按钮调整项目在列表中的显示顺序
- 💡 **紧凑界面**: 默认隐藏项目路径,悬停时显示,节省界面空间
- ⭐ **收藏功能**: 保存常用提示词,支持项目级别的收藏管理
- 🔍 **模糊搜索**: VSCode风格的文件路径匹配,支持智能高亮显示
- 📋 **一键复制**: 支持普通复制和带源码的复制功能
- 🔌 **Claude 代理**: 管理多个 Claude API 代理配置,一键切换,支持排序
- 🎨 **现代UI**: 基于Bootstrap 5的响应式界面,流畅的动画效果

## 🚀 快速开始

### 本地开发模式

#### 安装依赖
```bash
npm install
```

#### 启动应用
```bash
npm start
```
应用将在 `http://localhost:5010` 启动并自动打开浏览器。

### 全局安装模式

#### 全局安装
```bash
# 在项目目录下执行全局安装
npm install -g .
```

#### 全局使用
全局安装后，可以在任意目录下使用以下命令启动应用：
```bash
# 使用包名启动（推荐）
project-prompt

# 或使用 npx 启动
npx project-prompt
```

> **注意**: 全局安装后，应用会在系统后台启动，通常会自动打开浏览器。如需停止应用，请在终端按 `Ctrl+C`。

#### 更新全局安装
```bash
# 先卸载旧版本
npm uninstall -g project-prompt

# 重新安装新版本
npm install -g .
```

#### 卸载全局安装
```bash
npm uninstall -g project-prompt
```

## 📖 使用指南

### 安装方式选择
- **本地开发模式**: 适合需要修改代码或参与开发的用户
- **全局安装模式**: 适合日常使用，可以在任意目录快速启动工具

### 项目管理
1. 点击"添加项目"创建新项目
2. 配置项目路径和排除规则
3. 系统自动扫描项目文件并缓存
4. **项目排序**: 使用项目右侧的↑↓按钮调整项目显示顺序
5. **紧凑显示**: 项目路径默认隐藏，鼠标悬停时显示

### 文件选择
- 在文本框中输入 `@` 触发文件选择器
- 输入 `@@` 直接导入文件完整内容
- 支持路径片段和模糊匹配搜索

### 收藏管理
- 点击❤️按钮收藏当前提示词
- 在收藏下拉菜单中快速加载已保存的提示词
- 支持为每个收藏添加名称和描述

### Claude 代理管理
- 点击导航栏"Claude 代理设置"按钮进入管理界面
- **添加代理**: 配置代理名称、URL 和 API Token
- **一键激活**: 点击代理项即可激活该代理
- **当前状态**: 导航栏显示当前激活的代理名称
- **代理排序**: 使用↑↓按钮调整代理显示顺序
- **编辑删除**: 快速编辑或删除已配置的代理

### 界面操作
- **悬停交互**: 将鼠标悬停在项目上查看完整路径
- **按钮显示**: 项目操作按钮仅在悬停时显示,保持界面整洁
- **流畅动画**: 所有交互都有平滑的过渡效果

## 🏗️ 技术架构

### 后端
- **Express.js**: RESTful API服务器
- **项目排序API**: 支持 `/move-up` 和 `/move-down` 端点
- **Claude 代理API**: 完整的代理配置管理和请求转发
- **文件扫描**: 智能解析.gitignore规则
- **数据持久化**: JSON文件存储

### 前端 (模块化架构)
采用SOLID原则设计的模块化JavaScript架构:

```
public/js/
├── app.js                # 主协调器类 (包含项目排序功能)
├── ProjectManager.js     # 项目管理模块 (CRUD + 排序API)
├── FileManager.js        # 文件操作模块
├── FavoriteManager.js    # 收藏功能模块
├── ClaudeProxyManager.js # Claude 代理管理模块
└── UIUtils.js            # UI工具模块
```

#### 设计原则
- **单一职责原则**: 每个模块只负责一个功能领域
- **开放封闭原则**: 易于扩展新功能而不修改现有代码
- **依赖倒置**: 主类依赖抽象接口而非具体实现
- **KISS原则**: 保持简单直观的代码结构
- **DRY原则**: 共享工具避免代码重复

#### UI设计特点
- **紧凑布局**: 优化空间使用，减少不必要的间距
- **响应式交互**: 悬停显示详细信息，点击执行操作
- **视觉反馈**: 流畅的CSS过渡动画提升用户体验
- **直观操作**: 上下箭头按钮提供直观的排序控制

## 📁 项目结构

```
project-prompt/
├── bin/
│   └── cli.js              # CLI入口文件
├── public/
│   ├── index.html          # 主页面
│   ├── css/
│   │   └── style.css       # 样式文件
│   └── js/                 # JavaScript模块
│       ├── app.js          # 主应用类
│       ├── ProjectManager.js
│       ├── FileManager.js
│       ├── FavoriteManager.js
│       └── UIUtils.js
├── index.js                # Express服务器
├── package.json
├── CLAUDE.md              # AI助手开发文档
└── README.md              # 项目说明文档
```

## 🔧 配置说明

### 项目配置
- **项目路径**: 项目根目录的绝对路径
- **排除模式**: 支持glob模式的文件排除规则
- **包含完整路径**: 是否在文件列表中显示完整路径

### 数据存储
应用数据存储在 `data.json` 文件中:
```json
{
  "projects": [],       // 项目配置
  "prompts": {},        // 项目提示词内容
  "favorites": [],      // 收藏的提示词
  "claudeProxies": [],  // Claude 代理配置
  "activeProxyId": null // 当前激活的代理ID
}
```

## 🤝 开发贡献

### 代码风格
- 遵循SOLID设计原则
- 使用ES6+语法特性
- 保持良好的错误处理
- 添加必要的注释说明

### 模块扩展
要添加新功能模块：
1. 在 `public/js/` 创建新模块文件
2. 遵循现有的类结构和命名规范
3. 在 `app.js` 中集成新模块
4. 更新 `index.html` 引入新模块

## 📝 更新日志

### v2.2.0 - Claude 代理管理版本 (最新)
- ✅ **Claude 代理管理**: 新增 Claude API 代理配置管理功能
- ✅ **一键切换**: 点击代理项即可激活,无需额外按钮
- ✅ **状态显示**: 导航栏实时显示当前激活的代理名称
- ✅ **代理排序**: 支持上下移动代理显示顺序
- ✅ **请求转发**: 完整的流式请求转发支持
- ✅ **美化UI**: 统一按钮风格,优化代理列表视觉效果
- ✅ **智能提示**: 激活/删除操作显示具体代理名称

### v2.1.0 - 界面优化版本
- ✅ **项目排序**: 新增上下箭头按钮,支持拖拽式项目排序
- ✅ **紧凑界面**: 优化项目列表布局,默认隐藏路径信息
- ✅ **悬停交互**: 鼠标悬停显示项目详细路径和操作按钮
- ✅ **流畅动画**: 添加CSS过渡效果,提升交互体验
- ✅ **按钮定位**: 修复操作按钮溢出问题,使用绝对定位
- ✅ **API扩展**: 新增 `/move-up` 和 `/move-down` 后端接口

### v2.0.0 - 重构版本
- ✅ 完全重构JavaScript代码，从单文件1298行拆分为5个模块
- ✅ 应用SOLID设计原则，提升代码可维护性
- ✅ 修复文件选择器的多个bug
- ✅ 优化文件结构，分离CSS和JS资源
- ✅ 改进错误处理和用户反馈

### v1.0.0 - 初始版本
- ✅ 基础的项目管理功能
- ✅ 文件自动补全和内容导入
- ✅ 收藏系统
- ✅ 模板功能

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🙋‍♂️ 问题反馈

如有问题或建议，请提交Issue或Pull Request。